db = "bze2"
server =  "134.110.100.88"
port = "5432"
username = "hgercken"
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgrSQL.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgreSQL.R"))
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgreSQL.R"))
db = "bze2"
server =  "134.110.100.88"
port = "5432"
username = "hgercken"
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgreSQL.R"))
# 1.19. connection to SQL server ------------------------------------------
sqlconnection <- function(my_db, my_server, my_port, my_username){
dbconnection <- dbConnect(RPostgres::Postgres(),
dbname = my_db,
host=my_server,
port=my_port,
user=my_username,
rstudioapi::askForPassword(
prompt = "Please enter your password"
))
return(dbconnection)
}
db = "bze2"
server =  "134.110.100.88"
port = "5432"
username = "hgercken"
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgreSQL.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgreSQL.R"))
# datasets import from postgres databank
source(paste0(here(), "/scripts/02_00_connect_R_PostgreSQL.R"))
#  1.3. estabish connection to database --------------------------------------------------
#con <- dbConnect(RPostgres::Postgres(), dbname = db, host=host_db, port=db_port, user=db_user, password=db_password)
con <- sqlconnection(my_db = db, my_server = server, my_port = port, my_username = username)
db_name = "bze2"
db_server =  "134.110.100.88"
db_port = "5432"
db_username = "hgercken"
my_db_password <- rstudioapi::askForPassword(prompt = "Please enter your password")
db_name <- "bze2"
db_server <- "134.110.100.88"
db_port <- "5432"
db_username <- "hgercken"
my_db_password <- rstudioapi::askForPassword(prompt = "Please enter your password")
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
# 1.19. connection to SQL server ------------------------------------------
sqlconnection <- function(my_db, my_server, my_port, my_username, my_passwort){
dbconnection <- dbConnect(RPostgres::Postgres(),
dbname = my_db,
host=my_server,
port=my_port,
user=my_username,
# rstudioapi::askForPassword(
#   prompt = "Please enter your password")
password = my_passwort
)
return(dbconnection)
}
db_name <- "bze2"
db_server <- "134.110.100.88"
db_port <- "5432"
db_username <- "hgercken"
my_db_password <- rstudioapi::askForPassword(prompt = "Please enter your password")
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
#  1.3. estabish connection to database --------------------------------------------------
#con <- dbConnect(RPostgres::Postgres(), dbname = db, host=host_db, port=db_port, user=db_user, password=db_password)
con <- sqlconnection(my_db = db_name, my_server = db_server, my_port = db_port, my_username = db_user, my_password = my_db_password)
# 1.19. connection to SQL server ------------------------------------------
sqlconnection <- function(my_db, my_server, my_port, my_username, my_passwort){
dbconnection <- dbConnect(RPostgres::Postgres(),
dbname = my_db,
host=my_server,
port=my_port,
user=my_username,
# rstudioapi::askForPassword(
#   prompt = "Please enter your password")
password = my_passwort
)
return(dbconnection)
}
sqlconnection
#  1.3. estabish connection to database --------------------------------------------------
#con <- dbConnect(RPostgres::Postgres(), dbname = db, host=host_db, port=db_port, user=db_user, password=db_password)
con <- sqlconnection(my_db = db_name, my_server = db_server, my_port = db_port, my_username = db_user, my_password = my_db_password)
#  1.3. estabish connection to database --------------------------------------------------
#con <- dbConnect(RPostgres::Postgres(), dbname = db, host=host_db, port=db_port, user=db_user, password=db_password)
con <- sqlconnection(db_name, db_server,db_port, db_user,my_db_password)
db_name <- "bze2"
db_server <- "134.110.100.88"
db_port <- "5432"
db_user <- "hgercken"
my_db_password <- rstudioapi::askForPassword(prompt = "Please enter your password")
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
#  1.3. estabish connection to database --------------------------------------------------
#con <- dbConnect(RPostgres::Postgres(), dbname = db, host=host_db, port=db_port, user=db_user, password=db_password)
con <- sqlconnection(db_name, db_server,db_port, db_user,my_db_password)
con
askForSecret(
name,
message = paste(name, ":", sep = ""),
title = paste(name, "Secret")
)
askForSecret(
db_user,
message = paste(db_user, ":", sep = ""),
title = paste(db_user, "Secret")
)
askForSecret(
"db_user",
message = paste("db_user", ":", sep = ""),
title = paste("db_user", "Secret")
)
user.test <- rstudioapi::askForPassword(prompt = "Please enter your username")
db_name <- "bze2"
db_server <- "134.110.100.88"
db_port <- "5432"
db_user <-  rstudioapi::askForPassword(prompt = "Please enter your username")
my_db_password <- rstudioapi::askForPassword(prompt = "Please enter your password")
#### common/ general operations -------------------------------------------------------------------------------------------------------------------------------------------------------------------
# functions & packages
source(paste0(here(), "/scripts/01_00_functions_library.R"))
#  1.3. estabish connection to database --------------------------------------------------
#con <- dbConnect(RPostgres::Postgres(), dbname = db, host=host_db, port=db_port, user=db_user, password=db_password)
con <- sqlconnection(db_name, db_server,db_port, db_user,my_db_password)
con
# names of the tables we want to import to our raw data folder:
code_table_names <- c("neu_x_ld", "neu_k_tangenz", "x_bart_neu")
data_table_names <- c("b2beab", "tit_1", "be", "beab", "be_waldraender", "bej", "bejb", "bedw", "bedw_liste", "punkt", "HBI_location")
# 2.1. code tables ---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------
# 2.1.1. import code tables from database to raw folder -----------------------------------------------------------------------------------------------------------------------------------------
for (i in 1:length(code_table_names)) {
# i = 1
# get table name
my.table.name <- code_table_names[i]
# set schema name
my.schema.name <- "code"
# set database name
db_name <- 'bze3'
# set db connection
con <- sqlconnection(db_name, db_server, db_port, db_user, my_db_password)
# get table from database and transform into dataframe
df <- dbGetQuery(con, paste0("SELECT * FROM"," ", my.schema.name,".", my.table.name))
# name dataframe and export it to raw data folder
write.csv2(df, paste0(here("data/raw/general"), "/", my.table.name, ".csv"))
}
